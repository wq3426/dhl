863703030131523

15018779330

京S99837

delete from yard_plan where plan_date = '2017-07-28'

delete from yard_plan where plan_id = 66

delete from yard_device_data

select plan_id, plate_number, sort_number, plan_type, plan_starttime, plan_time, start_time, end_time, plan_endtime,
float_time, waiting_berth_number, waiting_berth_starttime, waiting_berth_endtime
from yard_plan where berth_id = 87 
and plan_date = '2017-07-28' 
and is_deleted = 0 
order by plan_starttime


Web:

顺延 / 修改开始时间

- 修改的计划开始时间不能早于当前时间
- 修改的计划开始时间不能早于最后一个已完成计划的结束时间
- 先将当前时间之后的不包含修改的计划的追加计划开始时间从当前时间开始重排
  - 如果修改的计划是追加计划
    - 顺延：将修改的计划插入到追加计划列表的第二个位置，然后将追加计划列表插入到当前时间之后的预定计划中
    - 修改：将修改的计划按开始时间比较插入到追加计划列表，然后将追加计划列表插入到当前时间之后的预定计划中
  - 如果修改的计划是预定计划，先与当前时间之后的预定计划作比较，确定开始时间，然后将追加计划列表插入到当前时间之后的预定计划中
    - 顺延/修改：先与当前时间之后的预定计划作比较，确定开始时间，然后将追加计划列表插入到当前时间之后的预定计划中

修改所有获取计划查询sql，不再按日期获取计划，而是按大于开始时间获取。

计划完成后，再添加计划，开始时间不是当前时间。

设备上报页面：滚动条右移后，菜单栏出现空白。

修改计划类型单选框改短。

泊位监控：点击作业泊位，空闲状态，“驶入车辆”字段改为“即将驶入车辆”，忙碌状态，“驶入车辆”字段改为“当前占用车辆”。

文档重新整理



优化：

多选情况，增加全选按钮

登录、查询等操作绑定enter事件

泊位监控：等待时长倒计时，做成后台定时器计时。

泊位监控：如果计划间隔时间过长，如何不让作业泊位在空闲时进入渴望等待。（加一个开关，后台定时查询，如果计划开始执行，则将开关打开）


app：

5.确认驶入之后的等待时长倒计时，是否能多次循环，现在只倒计时一次，如果超时，只有超时提醒，点击确定后，
  当前计划就停滞在这里了，如果作业泊位那边选择了继续等待，司机手机这边却不会再次提醒了，是否可以改为超时提醒点击后，
  如果作业泊位执行计划仍是当前计划，继续开始等待时长倒计时。

7.有计划完成后，点击历史记录，没有记录显示。

计划完成后，仍然在进行等待时长倒计时。

已完成计划显示：预计结束时间――>计划结束时间

泊位忙碌时，当前计划在手机上仍然进行等待时长倒计时，没有进入装卸时间累计。

增加开始作业按钮