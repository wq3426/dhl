
【账号、密码备忘】

开发环境：MyEclipse10/Eclipse + tomcat8.0 + JDK1.8

后台框架：SpringMVC + Spring + MyBatis

数据库：SQL Server (sa/admin123)

版本管理：SVN  (qiang.wang/8888  zeng.li/123456)

 - 泊位管理 http://epod.dhl.com/svn/0033/trunk/02-Sources/Java  代码名称：yard

 - CFDA http://epod.dhl.com/svn/0023/02-Branches/V2             代码名称：CFDA

企业邮箱：wangqiang@souvi.com / qiye@163

项目管理：http://epod.dhl.com/redmine/login  qiang.wang / 8888

华为Portal: 地址：https://112.93.129.154:8843/#/  账号、密码：CN_DHL_IoT / Changeme_123

DHL调试机器账号密码：souvicont001/bjsn004 / exel0612#

DHL远程服务器账号密码：IP：10.210.16.41  appladmin / exel2012#

项目部署路径：http://10.210.16.41:8098/yard  访问路径：http://epod.dhl.com/yard

项目部署服务器：23.158.249.50/211.152.62.139 用户名：Appladmin / Welcome1

生产环境数据库：10.210.1.50 / Dhl12345  sa / yywlsql50,

华为李亮：18321830496
苏通夏工：13918697206


【泊位系统清理表数据语句】
delete from yard_berth;
delete from yard_supplier;
truncate table yard_berth_supplier_map;
truncate table yard_plan_timelength;
truncate table yard_plan;
truncate table yard_device;
truncate table yard_device_data;

【个人事项备忘】
 - 给家里打钱
 - 拼音学习视频：悟空拼音
 - 查询社保情况
 - 体检报告（慈铭）
 - 给家里买测脂体重秤
 - 找吉他学习视频


【当前工作任务记录】

 【新监控界面业务流程】：

   1. 调度员设置作业泊位的渴望等待时长（默认1分钟，可调节）和执行未完成计划的允许等待时长（默认3分钟，可调节）

   2. 渴望等待时间超时报警和终止：
      当作业泊位状态为空闲时（泊位变为绿色），作业泊位开始渴望等待：

     - 监控界面：作业泊位进入渴望等待时长倒计时
                 a. 如果超时，开始报警（泊位变为绿色、闪动），调度员可在点击泊位出现的弹窗中选择继续等待、顺延、取消、修改计划开始时间
                    等操作（需要确认提示，防止误操作）进行调控，修改完成后，如果泊位状态为空闲，重新开始渴望等待时长倒计时
                 b. 如果作业泊位状态为忙绿（泊位变为红色），则渴望等待报警终止

     - APP界面：调用【接口1】（入参：要执行的计划的plan_id）获取计划的状态（是否取消）、排序号、排队号（等待计划数）
                 a. 如果计划已取消，给出计划取消提示信息；
                 b. 如果排队号不为0，给出等待提示信息；
                 c. 如果计划状态为未完成、排队号为0，手机震动、报警，提醒司机点击“开始驶入作业泊位”按钮

   3. 作业等待时间超时报警和终止：
       当作业泊位状态为空闲时（泊位变为绿色），司机点击请求驶入后，作业泊位变为黄色，泊位开始作业等待：

     - APP界面：司机点击开始驶入（调用【接口2】，入参：作业泊位号，要执行的计划的plan_id；返参：泊位允许的作业等待时长），
                APP端开始进入作业等待时长倒计时，同时还需调用【接口1】轮询获取计划状态（是否取消）、排序号、排队号（等待计划数）
                a. 如果作业等待时间超时，车辆计划状态为未完成、排队号为0（监控界面选择继续等待），则手机开始报警，提醒司机驶入作业泊位开始作业
                b. 如果轮询获取到的计划状态（是否取消）、排队号（等待计划数）发生变化，报警终止，并给出取消或等待提示信息

     - 监控界面：在收到APP端确认驶入请求后，作业泊位变为黄色，作业泊位进入作业等待时长倒计时
                 a. 如果超时，开始报警（泊位变为黄色、闪动），调度员可在点击泊位出现的弹窗中选择继续等待、顺延、取消、修改计划开始时间
                    等操作（需要确认提示，防止误操作）进行调控，修改完成后，如果泊位状态为空闲，重新开始渴望等待时长倒计时
                 b. 如果作业泊位状态为忙绿（泊位变为红色），则作业等待报警终止

 【监控界面展示】：

   1. 作业泊位点击
      a. 空闲展示：泊位状态、渴望等待时长、作业等待时长，下一计划的：车辆车牌号、司机联系方式、排序号、等候泊位号
      b. 忙碌展示：泊位状态、渴望等待时长、作业等待时长，当前计划的：车辆车牌号、司机联系方式、作业泊位驶入时间；下一计划的：车辆车牌号、排序号、等候泊位号

   2. 等候泊位点击
      a. 空闲展示：无
      b. 忙碌展示：泊位状态，车辆车牌号、司机联系方式、排序号、排队号（等待计划数）、目标作业泊位号、等候泊位驶入时间

 【APP接口】：
     接口1：（入参：要执行的计划的plan_id），获取返参：计划的状态（是否取消）、排序号、排队号（等待计划数）
     接口2：（入参：目标作业泊位号，要执行的计划的plan_id）发送确认驶入请求，获取返参：作业泊位允许的作业等待时长

 【问题】：

     - 泊位调度页面计划修改：
     1.计划顺延（往后顺延一个，若有booking，则再顺延）
     2.计划修改（重新指定计划开始时间）
     3.计划删除

     - 驶入等候泊位时间、驶离等候泊位时间更新
     - 泊位作业状态变更（websocket）

     - openlab重新添加泊位应用，上传证书、profile文件
     - 服务器订阅消息，softradio模拟发送指令到openlab，测试在单向认证的前提下消息推送是否成功

     - https使用测试

     1. 在计划添加后，不允许修改泊位类型，如果需要修改，由维护人员后台修改。（已确认）
     2. 固定泊位改名为作业泊位（已确认）
     3. 预定计划添加排序号，泊位时间轴上的计划方块显示计划的排序号。（已确认）
     4. 新监控页面，点击作业泊位显示：
        - 如果泊位状态为忙碌，将渴望等待时长和作业等待时长输入框置灰；
        - 如果泊位状态为空闲，将渴望等待时长和作业等待时长输入框设置为可编辑。（已确认）
     5. 忙碌的等候泊位的当前车辆信息，根据计划添加时指定的开始时间、等候泊位号获取（已确认）
     6. 计划修改、删除按钮调整，所有的泊位显示区分作业泊位和等候泊位（修改显示名称），整体界面协调（已确认）

     如果在计划添加后，修改了泊位类型，会怎样？
        a. 固定泊位状态改变，会进行如下操作：
           - 更新固定泊位当前计划的驶入时间或驶离时间
           - 更新固定泊位下一个执行计划的计划开始时间进行重排（可能，由于前一个计划延误导致）
        b. 等候泊位状态改变，会进行如下操作：
           - 如果为空闲，无展示信息
           - 如果为忙碌，则展示当前等候泊位的车辆信息
        c. 如果泊位类型发生改变，会出现如下情况：
           - 如果泊位类型从固定泊位修改为等候泊位，则不会再展示和更新该固定泊位的计划信息，在该修改起效之前添加的计划也不会再执行
           - 如果泊位类型从等候泊位修改为固定泊位，则该修改会对后续的计划添加起效，后续计划在添加或修改时可以指定该泊位为目标固定泊位，开始作业。

 【bug修改、测试】
   - bug修改列表：
     - 计划添加、修改测试、数据推送变更计划驶离时间测试、泊位状态测试
     - 泊位状态：
       - 查询供应商-泊位关联状态    http://localhost:8080/yard/plan/getSupplierBerthMapList.do
       - 泊位监控-泊位计划展示列表  http://localhost:8080/yard/plan/getBerthPlanMonitorList.do
     - 实体类字段默认值设置

 【文档完善】

   - bug测试内容整理(测试用例文档) 7月27号
   - PPT功能截图、说明  7月31号
   - 使用手册        7月31号
   - 测试用例文档    8月1、2号

   - 日志模块  华为日志 + 操作日志(外网部署时需要)

   - flms项目报表pdf导出


【技术学习、问题解决】
 
 泊位系统待学习、解决问题：
   - 本地tomcat启动失败原因
   - 用户登录状态控制  session + cookie  登录拦截器、listener、输入参数校验（非空、类型、唯一性）
   - 使用https后，eclipse的tomcat停止时会弹错
   - mybatis怎样不返回所有实体类字段 resultMap的type指定为hashmap
   - 泊位监控列表条件查询用#报错，用$就好了，为啥？
   - 自动化的输入校验怎么弄？
   - websocket使用测试
   - SpringMVC的异常处理
   - 导入导出Excel的工具类
   - SQL Server图形界面工具
   - Spring AOP的配置使用
   - Power Designer如何建数据模型，以及如何跟数据库关联
   - SQL Server数据库开发常用sql语法熟悉
   - log4j在项目中的使用   （需要将日志发送给华为）
   - maven的使用
   - 前后端分离的开发模式是怎样的，理解restful的含义和应用
   - 学习开发环境搭建
     - 框架搭建
     - 数据库创建
       - 外键约束含义
     - 如何用PD建表，包含字段类型、缺省值、约束、注释，Sql Server的常用数据类型
     - SVN
   - 技术管理（代码规范），项目进度把控（敏捷开发，项目周期制定）
   - MyEclipse注释模板设置

